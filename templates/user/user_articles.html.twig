{% extends 'base.html.twig' %}

{% block title %}Articles de {{ user.username }}{% endblock %}

{% block body %}
    <h1>Articles de {{ user.username }}</h1>
    <table style="font-size: 20px; width: 100%; border-collapse: collapse; margin-top: 20px;">
        <thead>
            <tr style="background-color: #f2f2f2;">
                <th style="padding: 10px; border: 1px solid #ddd;">Titre</th>
                <th style="padding: 10px; border: 1px solid #ddd;">Date de création</th>
                {% if is_granted('ROLE_ADMIN') %}
                    <th style="padding: 10px; border: 1px solid #ddd;">Actions</th>
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for article in articles %}
                <tr {% if loop.index is odd %}style="background-color: #5ED9F4;"{% endif %}>
                    <td style="padding: 10px; border: 1px solid #ddd;">{{ article.title }}</td>
                    <td style="padding: 10px; border: 1px solid #ddd;">{{ article.creationDate|date('d-m-Y H:i') }}</td>
                    {% if is_granted('ROLE_ADMIN') %}
                        <td style="padding: 10px; border: 1px solid #ddd;">
                            <form method="post" action="{{ path('app_delete_articledepuisAdmin', {'id': article.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet article ?');">
                                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ article.id) }}">
                                <button class="btn btn-danger">Supprimer</button>
                            </form>
                        </td>
                    {% endif %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
